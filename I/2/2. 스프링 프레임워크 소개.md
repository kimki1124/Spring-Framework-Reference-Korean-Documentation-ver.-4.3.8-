## 2. 스프링 프레임워크 소개
스프링 프레임워크는 Java 어플리케이션 개발을 위한 포괄적인 인프라 지원을 제공하는 Java 플랫폼입니다. 스프링은 인프라를 처리하므로 어플리케이션에 집중할 수 있습니다.

스프링을 사용하면 "POJO (Plain Old Java Object)"에서 응용 프로그램을 빌드하고 비 침입적으로 POJO에 엔터프라이즈 서비스를 적용할 수 있습니다. 이 기능은 Java SE 프로그래밍 모델과 전체 및 부분 Java EE에 적용됩니다.

어플리케이션 개발자로서 스프링 플랫폼의 이점을 누릴 수있는 예는 다음과 같습니다.
• 트랜잭션 API를 처리할 필요없이 데이터베이스 트랜잭션에서 Java 메서드를 실행합니다.
• Servlet API를 다룰 필요없이 로컬 Java 메서드를 HTTP 엔드 포인트로 만듭니다.
• JMS API를 처리 할 필요없이 로컬 Java 메서드를 메시지 핸들러로 만듭니다.
• JMX API를 다루지 않고도 로컬 Java 메서드를 관리 작업으로 만들수 있습니다.

### 2.1 의존성 주입과 제어의 역전
제한된 임베디드 애플리케이션에서 n 티어 서버 측 엔터프라이즈 어플리케이션으로 영역을 확장하는 느슨한 용어인 Java 어플리케이션은 일반적으로 적절한 어플리케이션을 구성하기 위해 협업하는 객체로 구성됩니다. 따라서 응용 프로그램의 객체는 서로 종속됩니다.

Java 플랫폼은 풍부한 응용 프로그램 개발 기능을 제공하지만 기본 구성 요소를 일관성있는 전체로 구성할수있는 방법이 부족하여 해당 작업을 설계자와 개발자에게 맡깁니다. Factory, Abstract Factory, Builder, Decorator 및 Service Locator와 같은 디자인 패턴을 사용하여 응용 프로그램을 구성하는 다양한 클래스와 객체 인스턴스를 구성 할 수있지만 이러한 패턴은 패턴이 무엇인지, 어디에 적용할 것인가, 문제를 해결할 것 등을 결정할 수 있습니다. 패턴은 응용 프로그램에서 직접 구현해야하는 형식화 된 모범 사례입니다.

스프링 프레임워크 Inversion of Control (IoC) 컴포넌트는 이질적인 컴포넌트를 사용할 준비가 된 완전히 작동하는 어플리케이션으로 공식화하는 수단을 제공함으로써 이러한 문제를 해결합니다. 스프링 프레임워크는 공식화 된 디자인 패턴을 자신의 애플리케이션에 통합 할 수있는 일류 객체로 규정합니다. 수 많은 조직과 기관에서는 이러한 방식으로 스프링 프레임워크를 사용하여 견고하고 유지 보수가 쉬운 응용 프로그램을 설계합니다.

##### 배경지식
"문제는 제어의 어떤 관점이 반전되고 있는가" 마틴 파울러는 2004년 자신의 웹 사이트에서 IoC (Inversion of Control)에 관한 질문을 제기했습니다. 파울러는 원리를 더 자명하게하기 위해 이름 바꾸기를 제안하고 의존성 주입 (Dependency Injection)을 제안했습니다.

### 2.2 프레임워크 모듈
스프링 프레임워크는 약 20개의 모듈로 구성된 기능으로 구성됩니다. 이러한 모듈은 다음 다이어그램과 같이 코어 컨테이너, 데이터 액세스 / 통합, 웹, AOP (Aspect Oriented Programming), 계측, 메시징 및 테스트로 그룹화됩니다.

![spring_reference_02_01](http://i.imgur.com/zawW1Bq.jpg)

다음 섹션에서는 각 기능의 사용 가능한 모듈과 해당 아티팩트 이름 및 해당 항목에 대해 설명합니다. 이슈 이름은 종속성 관리 도구에 사용되는 아티팩트 ID와 관련이 있습니다.

#### Core Container
코어 컨테이너는 spring-core, spring-bean, spring-context, spring-context-support 및 스프링 표현 언어 (Spring Expression Language) 모듈로 구성됩니다.

스프링 코어 및 스프링 빈 모듈은 IoC 및 Dependency Injection 기능을 포함하여 프레임 워크의 기본 부분을 제공합니다. BeanFactory는 공장 패턴의 정교한 구현입니다. 프로그래밍 방식의 싱글톤에 대한 필요성을 없애고 실제 프로그램 논리에서 종속성의 구성과 규격을 분리 할 수 ​​있습니다.

컨텍스트 (스프링 컨텍스트) 모듈은 코어 및 빈 모듈이 제공하는 견고한 기반 위에 구축됩니다. 이는 JNDI 레지스트리와 비슷한 프레임 워크 스타일 방식으로 객체에 액세스하는 수단입니다. Context 모듈은 Beans 모듈에서 기능을 상속하며, 국제화 (예 : 리소스 번들 사용), 이벤트 전달, 리소스 로드 및 Servlet 컨테이너와 같은 컨텍스트의 명백한 작성을 지원합니다. 컨텍스트 모듈은 EJB, JMX 및 기본 원격 처리와 같은 Java EE 기능도 지원합니다. ApplicationContext 인터페이스는 Context 모듈의 초점입니다. 스프링 컨텍스트 지원은 캐싱 (EhCache, Guava, JCache), 메일링 (JavaMail), 스케줄링 (CommonJ, Quartz) 및 템플릿 엔진 (FreeMarker, JasperReports, Velocity)을 위한 스프링 애플리케이션 컨텍스트에 일반적인 써드 파티 라이브러리를 통합하기위한 지원을 제공합니다.

spring-expression 모듈은 런타임에 객체 그래프를 쿼리하고 조작하기위한 강력한 표현 언어를 제공합니다. 이는 JSP 2.1 사양에 지정된 통합 표현식 언어 (통합 EL)의 확장입니다. 언어는 속성 값 설정, 속성 할당, 메소드 호출, 배열, 콜렉션 및 인덱서의 내용, 논리 및 산술 연산자, 명명된 변수 및 Spring의 IoC 컨테이너에서 이름 별로 객체 검색에 액세스하는 것을 지원합니다. 또한 리스트 프로젝션 및 셀렉션은 물론 공통 리스트 집계를 지원합니다.

#### AOP와 Instrumentation
spring-aop 모듈은 AOP 얼라이언스와 호환되는 aspect 지향 프로그래밍 구현을 제공합니다. 예를 들어 메소드 인터셉터와 pointcut을 정의하여 분리되어야하는 기능을 구현하는 코드를 완전히 분리 할 수 있습니다. 소스 수준 메타 데이터 기능을 사용하면 .NET 특성과 유사한 방식으로 동작 정보를 코드에 통합할 수 있습니다.

별도의 spring-aspects 모듈은 AspectJ와의 통합을 제공합니다.

spring-instrument 모듈은 특정 어플리케이션 서버에서 사용되는 클래스 계측 지원 및 클래스 로더 구현을 제공합니다. spring-instrument-tomcat 모듈은 Spring의 Tomcat 용 계측 에이전트를 포함합니다.

#### 메시징
스프링 프레임워크 4에는 Message, MessageChannel, MessageHandler 등과 같은 스프링 통합 프로젝트의 주요 추상화가 포함된 스프링 메시징 모듈이 포함되어있어 메시징 기반 어플리케이션의 토대가 됩니다. 또한 이 모듈에는 메소드에 메시지를 매핑하기위한 어노테이션 세트가 포함되어있으며, Spring MVC 어노테이션 기반 프로그래밍 모델과 유사합니다.

#### 데이터 접근/통합
데이터 액세스 / 통합 계층은 JDBC, ORM, OXM, JMS 및 트랜잭션 모듈로 구성됩니다.

spring-jdbc 모듈은 지루한 JDBC 코딩과 데이터베이스 벤더 고유의 에러 코드 분석을 제거하는 JDBC 추상화 레이어를 제공합니다.

spring-tx 모듈은 특별한 인터페이스를 구현하는 클래스와 모든 POJO (Plain Old Java Objects)를 위한 프로그래밍 및 선언적 트랜잭션 관리를 지원합니다.

spring-orm 모듈은 JPA, JDO 및 Hibernate를 포함하여 널리 사용되는 객체 관계형 매핑 API를위한 통합 레이어를 제공합니다. spring-orm 모듈을 사용하면 앞에서 언급한 간단한 선언적 트랜잭션 관리 기능과 같은 스프링의 다른 모든 기능과 함께 이러한 O/R 매핑 프레임워크를 모두 사용할 수 있습니다.

spring-oxm 모듈은 JAXB, Castor, XMLBeans, JiBX 및 XStream과 같은 Object/XML 매핑 구현을 지원하는 추상화 계층을 제공합니다.

spring-jms 모듈 (Java Messaging Service)에는 메시지를 생성하고 소비하는 기능이 있습니다. 스프링 프레임워크 4.1부터 스프링 메시징 모듈과의 통합을 제공합니다.

#### 웹
웹 계층은 spring-web, spring-webmvc, spring-websocket 및 springwebmvc-portlet 모듈로 구성됩니다.

스프링 - 웹 모듈은 멀티파트 파일 업로드 기능과 서블릿 리스너와 웹 지향 응용프로그램 컨텍스트를 사용하여 IoC 컨테이너 초기화와 같은 기본적인 웹 지향 통합 기능을 제공합니다. 또한 HTTP 클라이언트와 스프링의 원격 지원의 웹 관련 부분을 포함합니다.

spring-webmvc 모듈 (웹 - 서블릿 모듈이라고도 함)에는 스프링의 modelview-controller (MVC) 및 웹 응용 프로그램 용 REST 웹 서비스 구현이 포함되어 있습니다. Spring의 MVC 프레임 워크는 도메인 모델 코드와 웹 폼을 깔끔하게 분리하고 스프링 프레임워크의 다른 모든 기능과 통합합니다.

spring-webmvc-portlet 모듈 (web portlet 모듈이라고도 함)은 portlet 환경에서 사용할 MVC 구현을 제공하고 서블릿 기반 spring-webmvc 모듈의 기능을 반영합니다.

#### 테스트
스프링 테스트 모듈은 JUnit 또는 TestNG를 사용하여 스프링 구성 요소의 유닛 테스트 및 통합 테스트를 지원합니다. Spring ApplicationContext의 일관된 로딩과 이러한 컨텍스트의 캐싱을 제공합니다. 또한 코드를 독립적으로 테스트하는 데에 사용할 수 있는 모의 객체를 제공합니다.

### 2.3 사용 시나리오
이전에 설명한 빌딩 블록은 리소스가 제한된 장치에서 실행되는 임베디드 응용 프로그램에서부터 스프링의 트랜잭션 관리 기능과 웹 프레임 워크 통합을 사용하는 완전한 엔터프라이즈 응용 프로그램에 이르기까지 다양한 시나리오에서 스프링을 논리적 선택으로 만듭니다.

![spring_reference_02_02](http://i.imgur.com/BiTwfu8.jpg)

스프링의 선언적 트랜잭션 관리 기능은 EJB 컨테이너 관리 트랜잭션을 사용하는 것처럼 웹 어플리케이션을 완전히 트랜잭션화 합니다. 모든 사용자 정의 비즈니스 로직은 간단한 POJO로 구현 될 수 있으며 스프링의 IoC 컨테이너에 의해 관리 될 수 있습니다. 추가 서비스에는 유효성 검사 규칙을 실행할 위치를 선택할 수있는 웹 계층과 독립적인 유효성 검사 및 전자 메일 전송 지원이 포함됩니다. 스프링의 ORM 지원은 JPA, Hibernate 및 JDO와 통합되어 있습니다. 예를 들어, Hibernate를 사용할 때, 당신은 기존 매핑 파일과 표준 Hibernate SessionFactory 설정을 계속 사용할 수 있습니다. 폼 컨트롤러는 웹 모델과 도메인 모델을 완벽하게 통합하여 HTTP 매개 변수를 도메인 모델의 값으로 변환하는 ActionForms 또는 다른 클래스의 필요성을 제거합니다.

![spring_reference_02_03](http://i.imgur.com/hYsgXp5.jpg)

때로는 상황에 따라 다른 프레임워크로 완전히 전환할 수 없을 때도 있습니다. 스프링 프레임워크는 모든 것을 사용하도록 강요하지 않습니다. 모든것을 사용하든 아니든 해결책이 아닙니다. Struts, Tapestry, JSF 또는 기타 UI 프레임 워크로 구축 된 기존 프론트엔드는 스프링 트랜잭션 기능을 사용할 수있는 스프링 기반 중간 계층과 통합 될 수 있습니다. ApplicationContext를 사용하여 비즈니스 로직을 연결하고 WebApplicationContext를 사용하여 웹 레이어를 통합하기만 하면 됩니다.

![spring_reference_02_04](http://i.imgur.com/9zdMkZ2.jpg)

웹 서비스를 통해 기존 코드에 액세스해야하는 경우 스프링의 Hessian-, Burlap-, Rmi- 또는 JaxRpcProxyFactory 클래스를 사용할 수 있습니다. 기존 애플리케이션에 대한 원격 액세스를 가능하게 하는 것은 어렵지 않습니다.

![spring_reference_02_05](http://i.imgur.com/pcE58gQ.jpg)

또한 스프링 프레임워크는 Enterprise JavaBeans에 대한 액세스 및 추상화 레이어를 제공하여 기존 POJO를 재사용하고 선언적 보안이 필요할수있는 확장 가능한 fail-safe 웹 응용 프로그램에서 사용할수있는 비 상태 세션 빈으로 래핑할 수 있습니다.

#### 의존성 관리와 네이밍 규약
의존성 관리와 의존성 주입은 다른 것입니다. 스프링의 멋진 기능을 응용 프로그램 (의존성 주입과 같은)으로 가져오려면 필요한 모든 라이브러리 (jar 파일)를 어셈블하고 런타임에 클래스 경로로 가져와야 합니다. 이러한 종속성은 삽입되는 가상 구성 요소가 아니라 파일 시스템의 물리적 자원 (일반적으로)입니다. 종속성 관리 프로세스에는 해당 자원의 위치 파악, 저장 및 클래스 경로에 추가가 포함됩니다. 의존성은 직접적일 수 있습니다 (예 : 내 응용 프로그램이 Spring의 런타임에 달려 있음). 또는 간접적인 경우 (예 : 내 응용 프로그램은 commons-pool에 종속 된 commons-dbcp에 의존 함). 간접적 종속성은 "이행적"이라고도 알려져 있으며 식별 및 관리가 가장 어려운 의존성입니다.

스프링을 사용하려면 필요한 스프링을 구성하는 jar 라이브러리 사본을 얻어야 합니다. 보다 쉬운 스프링을 만들기 위해 스프링은 가능한 한 의존성을 분리하는 모듈 집합으로 패키지됩니다. 예를 들어 웹 응용 프로그램을 작성하지 않으려는 경우 스프링 웹 모듈이 필요하지 않습니다. 이 가이드의 스프링 라이브러리 모듈을 참조하기 위해 spring- * 또는 spring - * .jar이라는 단축형 명명 규칙을 사용합니다. 여기서 * 는 모듈의 약식 이름을 나타냅니다 (예 : spring-core, spring-webmvc, spring-jms 등). 사용하는 실제 jar 파일 이름은 일반적으로 버전 번호로 연결된 모듈 이름입니다 (예 : spring-core-4.3.8.RELEASE.jar).

스프링 프레임워크의 각 릴리즈는 다음 위치에 아티팩트를 게시합니다.

• 메이븐 중앙저장소 (Maven Central) - 메이븐이 쿼리하는 기본 리포지토리이며 특별한 구성없이 사용할 수 있습니다. 스프링이 의존하고있는 많은 공통 라이브러리들도 Maven Central에서 구할 수 있으며, 스프링 커뮤니티의 큰 부분은 의존성 관리를 위해 메이븐을 사용하기 때문에 편리합니다. 여기에있는 jar의 이름은 spring - * <version> .jar 형식이며 Maven groupId는 org.springframework입니다.

• 스프링을 위해 특별히 호스팅 된 공개 메이븐 저장소. 최종 GA 릴리즈 외에도 이 저장소는 개발 스냅샷 및 마일스톤을 호스팅합니다. jar 파일 이름은 Maven Central과 같은 형식이기 때문에 스프링의 개발 버전을 Maven Central에 배포 된 다른 라이브러리와 함께 사용할 수있는 유용한 곳입니다. 이 저장소는 또한 쉽게 다운로드 할 수 있도록 함께 번들로 묶인 모든 Spring jar를 포함하는 번들 배포 zip 파일을 포함합니다.

따라서 가장 먼저 결정해야 할 것은 종속성을 관리하는 방법입니다. 일반적으로 Maven, Gradle 또는 Ivy와 같은 자동화 된 시스템을 사용하는 것이 좋지만 모든 Jar를 직접 다운로드하여 수동으로 수행 할 수도 있습니다.
